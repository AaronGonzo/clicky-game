"use strict";function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _objectWithoutProperties(t,e){var r={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};!function(t,e,r,a){if(void 0===e.ut&&(e.ut={}),void 0!==e.ut.player)if(void 0!==e.ut.utils){var n=function(t,a,n,i){var o=_objectWithoutProperties(i,[]),l=Math.max(0,Math.min(100,r.get(o,"teamChemistry",100))),s=Math.max(0,Math.min(10,r.get(o,"individualChemistry",10))),u=r.get(t,n,99),c=a[n],y=.25*l+7.5*s-50,h=null;h=0===s?-25:y<0?y/2:c*y/50;var d=e.ut.utils.eaStatNormalize(u+h);return h=d-u,{original:u,delta:h,final:d}};e.ut.utils=_extends({},e.ut.utils,{applyChemistryStyle:function(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return e.ut.player.getIgsFieldsForYear(a.year,"GK"===a.position).then(function(l){if(!(null==l||Array.isArray(l)&&0===l.length)){a.chemistryChanges={},a.total_ingame_stats=0;var s=l.reduce(function(t,e){var l,s=n(a,r,e,{teamChemistry:i,individualChemistry:o});return _extends({},t,(l={total_ingame_stats:t.total_ingame_stats+s.final},_defineProperty(l,e,s.final),_defineProperty(l,"chemistryChanges",_extends({},t.chemistryChanges,_defineProperty({},e,s))),l))},a);return t.when(s,e.ut.player.getIgsWeights("GK"===s.position))}console.warn("No IGS fields found for player year "+a.version)}).then(function(t,r){var a={attr1:e.ut.player.calculatePrimaryStat("attr1",t,r),attr2:e.ut.player.calculatePrimaryStat("attr2",t,r),attr3:e.ut.player.calculatePrimaryStat("attr3",t,r),attr4:e.ut.player.calculatePrimaryStat("attr4",t,r),attr5:e.ut.player.calculatePrimaryStat("attr5",t,r),attr6:e.ut.player.calculatePrimaryStat("attr6",t,r)};return _extends({},t,a,{total_stats:Object.keys(a).reduce(function(t,e){return t+a[e]},0)})})},getChemistryStylesForYear:function(e){return t.when(t.getJSON("/ut/api/chemistry-styles/"+e+"/")).then(function(t){return t.status&&"ok"===t.status?t.data:null})},getStatColorClass:function(t){return(t=parseInt(t))<60?"stat-color-1":t<70?"stat-color-2":t<80?"stat-color-3":t<90?"stat-color-4":"stat-color-5"}})}else console.error("Could not inject chemistry style helpers into the page!\nwindow.ut.utils namespace must be loaded first.");else console.error("Could not inject chemistry style helpers into the page!\nwindow.ut.player namespace must be loaded first.")}($,window,_);